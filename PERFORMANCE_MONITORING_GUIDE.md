# ğŸš€ æ€§èƒ½ç›‘æ§ä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬ç³»ç»Ÿå·²é›†æˆå®Œæ•´çš„æ€§èƒ½ç›‘æ§åŠŸèƒ½ï¼Œå¸®åŠ©æ‚¨å®æ—¶ç›‘æ§æ˜¾å¡çŠ¶æ€ã€æ¨¡å‹ä½¿ç”¨ä¿¡æ¯å’Œè´Ÿè½½å‡è¡¡ç­–ç•¥æ‰§è¡Œæƒ…å†µã€‚

## ğŸ” ç›‘æ§åŠŸèƒ½æ¦‚è§ˆ

### 1. ğŸš€ è´Ÿè½½å‡è¡¡ç›‘æ§
- **å®ä¾‹é€‰æ‹©è¿‡ç¨‹**ï¼šè¯¦ç»†è®°å½•è´Ÿè½½å‡è¡¡ç­–ç•¥çš„æ‰§è¡Œè¿‡ç¨‹
- **è¯„åˆ†ç³»ç»Ÿ**ï¼šæ˜¾ç¤ºæ¯ä¸ªå®ä¾‹çš„ç»¼åˆè¯„åˆ†å’Œè¯¦ç»†æŒ‡æ ‡
- **ç­–ç•¥åˆ‡æ¢**ï¼šç›‘æ§ä»»åŠ¡ç±»å‹åŒ¹é…å’Œå›é€€ç­–ç•¥
- **æ€§èƒ½ç»Ÿè®¡**ï¼šè®°å½•é€‰æ‹©è€—æ—¶å’ŒæˆåŠŸç‡

### 2. ğŸ“Š GPUçŠ¶æ€ç›‘æ§
- **ç¡¬ä»¶ä¿¡æ¯**ï¼šGPUæ•°é‡ã€å‹å·ã€æ¸©åº¦ã€åˆ©ç”¨ç‡
- **å†…å­˜ä½¿ç”¨**ï¼šå®æ—¶å†…å­˜ä½¿ç”¨ç‡å’Œå¯ç”¨å†…å­˜
- **å®ä¾‹åˆ†å¸ƒ**ï¼šæ¯ä¸ªGPUä¸Šçš„å®ä¾‹æ•°é‡å’Œç±»å‹
- **ä»»åŠ¡ç»Ÿè®¡**ï¼šæ–‡æœ¬ç¿»è¯‘å’Œæ–‡ä»¶ç¿»è¯‘ä»»åŠ¡åˆ†å¸ƒ

### 3. âš¡ ç¿»è¯‘æ€§èƒ½ç›‘æ§
- **å“åº”æ—¶é—´**ï¼šæ¨¡å‹æ¨ç†ã€å®ä¾‹è·å–ã€Tokenizationè€—æ—¶
- **ä»»åŠ¡ç»Ÿè®¡**ï¼šæ€»ä»»åŠ¡æ•°ã€æˆåŠŸç‡ã€ä»»åŠ¡ç±»å‹åˆ†å¸ƒ
- **æ‰¹é‡å¤„ç†**ï¼šæ‰¹é‡ç¿»è¯‘çš„æ•ˆç‡å’Œç»Ÿè®¡ä¿¡æ¯

## ğŸ“ æ—¥å¿—æ ¼å¼è¯´æ˜

### è´Ÿè½½å‡è¡¡æ—¥å¿—
```
ğŸš€ [è´Ÿè½½å‡è¡¡] å¼€å§‹é€‰æ‹©æ¨¡å‹å®ä¾‹ - ä»»åŠ¡ç±»å‹: text, ä½¿ç”¨CUDA: True
ğŸ“Š [è´Ÿè½½å‡è¡¡] å¯ç”¨å®ä¾‹æ•°é‡: 4
ğŸ¯ [è´Ÿè½½å‡è¡¡] ä½¿ç”¨textä¸“ç”¨å®ä¾‹ï¼Œæ•°é‡: 2
ğŸ”„ [GPUç›‘æ§] å·²æ›´æ–°GPUå†…å­˜ä½¿ç”¨ä¿¡æ¯
ğŸ“‹ [è´Ÿè½½å‡è¡¡] å¼€å§‹è¯„ä¼°å®ä¾‹çŠ¶æ€...
ğŸ“Š [è´Ÿè½½å‡è¡¡] å®ä¾‹ cuda_0_0 è¯„åˆ†: 85.5 - æ§½ä½: 3/4 (30.0) | ç±»å‹åŒ¹é…: +20 | å“åº”æ—¶é—´: 45.2ms (13.7) | æˆåŠŸç‡: 0.98 (9.8) | GPUå†…å­˜: 0.75 (1.25)
ğŸ† [è´Ÿè½½å‡è¡¡] æ–°æœ€ä½³å®ä¾‹: cuda_0_0 (è¯„åˆ†: 85.5)
âœ… [è´Ÿè½½å‡è¡¡] å®ä¾‹é€‰æ‹©å®Œæˆ - é€‰æ‹©: cuda_0_0, è€—æ—¶: 12.3ms
```

### ç¿»è¯‘æ€§èƒ½æ—¥å¿—
```
ğŸš€ [ç¿»è¯‘] å¼€å§‹ç¿»è¯‘å•ä¸ªå¥å­ - ä»»åŠ¡ç±»å‹: text, ä½¿ç”¨CUDA: True
ğŸ“ [ç¿»è¯‘] æºè¯­è¨€: zh_Hans -> ç›®æ ‡è¯­è¨€: khk_Cyrl, æ–‡æœ¬é•¿åº¦: 25
âœ… [ç¿»è¯‘] è·å–æ¨¡å‹å®ä¾‹å®Œæˆ - å®ä¾‹ID: cuda_0_0, è€—æ—¶: 15.2ms
âš¡ [ç¿»è¯‘] æ¨¡å‹æ¨ç†å®Œæˆ - è€—æ—¶: 234.7ms
```

### æ‰¹é‡ç¿»è¯‘æ—¥å¿—
```
ğŸš€ [æ‰¹é‡ç¿»è¯‘] å¼€å§‹æ‰¹é‡ç¿»è¯‘ - ä»»åŠ¡ç±»å‹: file, ä½¿ç”¨CUDA: True
ğŸ“ [æ‰¹é‡ç¿»è¯‘] æºè¯­è¨€: zh_Hans -> ç›®æ ‡è¯­è¨€: khk_Cyrl, æ–‡æœ¬æ•°é‡: 50
ğŸ“Š [æ‰¹é‡ç¿»è¯‘] æ€»æ–‡æœ¬é•¿åº¦: 1250 å­—ç¬¦
```

## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

### 1. å®æ—¶ç›‘æ§æ—¥å¿—
```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/app.log

# è¿‡æ»¤è´Ÿè½½å‡è¡¡æ—¥å¿—
grep "è´Ÿè½½å‡è¡¡" logs/app.log

# è¿‡æ»¤ç¿»è¯‘æ€§èƒ½æ—¥å¿—
grep "ç¿»è¯‘" logs/app.log

# è¿‡æ»¤GPUç›‘æ§æ—¥å¿—
grep "GPUç›‘æ§" logs/app.log
```

### 2. GPUçŠ¶æ€æ¥å£
```bash
# è·å–GPUçŠ¶æ€ä¿¡æ¯
curl http://localhost:8000/gpu_status

# è¿”å›çš„JSONåŒ…å«ï¼š
{
  "status": "success",
  "gpus": [
    {
      "gpu_id": 0,
      "name": "Tesla T4",
      "memory_total": 16106127360,
      "memory_used": 1207959552,
      "memory_free": 14898167808,
      "memory_usage_percent": 7.5,
      "temperature": 45,
      "utilization": 15,
      "instances_count": 2,
      "active_instances": 1,
      "text_instances": 1,
      "file_instances": 1
    }
  ],
  "overall_stats": {
    "total_gpus": 1,
    "total_memory_used": 1207959552,
    "total_memory_total": 16106127360,
    "overall_memory_usage_percent": 7.5,
    "total_instances": 2,
    "active_instances": 1,
    "text_instances": 1,
    "file_instances": 1
  }
}
```

### 3. æ€§èƒ½åˆ†æå·¥å…·
```python
# åˆ†æå“åº”æ—¶é—´åˆ†å¸ƒ
import re
import matplotlib.pyplot as plt

# æå–å“åº”æ—¶é—´æ•°æ®
response_times = []
with open('logs/app.log', 'r') as f:
    for line in f:
        match = re.search(r'è€—æ—¶: ([\d.]+)ms', line)
        if match:
            response_times.append(float(match.group(1)))

# ç»˜åˆ¶åˆ†å¸ƒå›¾
plt.hist(response_times, bins=20)
plt.xlabel('å“åº”æ—¶é—´ (ms)')
plt.ylabel('é¢‘æ¬¡')
plt.title('ç¿»è¯‘å“åº”æ—¶é—´åˆ†å¸ƒ')
plt.show()
```

## ğŸ“Š å…³é”®æŒ‡æ ‡è¯´æ˜

### è´Ÿè½½å‡è¡¡è¯„åˆ†ç³»ç»Ÿ
- **æ§½ä½è¯„åˆ† (40%)**ï¼šå¯ç”¨æ§½ä½è¶Šå¤šï¼Œè¯„åˆ†è¶Šé«˜
- **ç±»å‹åŒ¹é… (20%)**ï¼šä»»åŠ¡ç±»å‹åŒ¹é…è·å¾—å¥–åŠ±åˆ†
- **å“åº”æ—¶é—´ (25%)**ï¼šå“åº”æ—¶é—´è¶ŠçŸ­ï¼Œè¯„åˆ†è¶Šé«˜
- **æˆåŠŸç‡ (10%)**ï¼šä»»åŠ¡æˆåŠŸç‡å½±å“è¯„åˆ†
- **GPUå†…å­˜ (5%)**ï¼šå†…å­˜ä½¿ç”¨ç‡è¶Šä½ï¼Œè¯„åˆ†è¶Šé«˜

### æ€§èƒ½é˜ˆå€¼å»ºè®®
- **å®ä¾‹é€‰æ‹©æ—¶é—´**ï¼š< 50ms (ä¼˜ç§€), < 100ms (è‰¯å¥½), > 200ms (éœ€è¦ä¼˜åŒ–)
- **æ¨¡å‹æ¨ç†æ—¶é—´**ï¼š< 100ms (ä¼˜ç§€), < 300ms (è‰¯å¥½), > 500ms (éœ€è¦ä¼˜åŒ–)
- **GPUå†…å­˜ä½¿ç”¨ç‡**ï¼š< 70% (å®‰å…¨), < 85% (è­¦å‘Š), > 90% (å±é™©)
- **ä»»åŠ¡æˆåŠŸç‡**ï¼š> 95% (ä¼˜ç§€), > 90% (è‰¯å¥½), < 85% (éœ€è¦æ£€æŸ¥)

## ğŸ”§ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. è´Ÿè½½å‡è¡¡æ•ˆç‡ä½
**ç—‡çŠ¶**ï¼šå®ä¾‹é€‰æ‹©æ—¶é—´è¿‡é•¿ï¼Œè¯„åˆ†å·®å¼‚ä¸å¤§
**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥GPUå†…å­˜ä½¿ç”¨æƒ…å†µ
- ä¼˜åŒ–ä»»åŠ¡ç±»å‹åˆ†å¸ƒ
- è°ƒæ•´è¯„åˆ†æƒé‡

#### 2. GPUå†…å­˜ä¸è¶³
**ç—‡çŠ¶**ï¼šå†…å­˜ä½¿ç”¨ç‡è¿‡é«˜ï¼Œå®ä¾‹åˆ›å»ºå¤±è´¥
**è§£å†³æ–¹æ¡ˆ**ï¼š
- å‡å°‘å¹¶å‘ä»»åŠ¡æ•°
- æ¸…ç†æœªä½¿ç”¨çš„å®ä¾‹
- é‡å¯GPUæœåŠ¡

#### 3. ç¿»è¯‘æ€§èƒ½ä¸‹é™
**ç—‡çŠ¶**ï¼šå“åº”æ—¶é—´å¢åŠ ï¼ŒæˆåŠŸç‡ä¸‹é™
**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥æ¨¡å‹å®ä¾‹çŠ¶æ€
- ç›‘æ§GPUæ¸©åº¦
- åˆ†æä»»åŠ¡åˆ†å¸ƒ

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. å®ä¾‹é…ç½®ä¼˜åŒ–
```ini
[GPU]
# æ ¹æ®GPUå†…å­˜è°ƒæ•´å¹¶å‘æ•°
GPU_CONCURRENT_LIMIT = 4  # T4å»ºè®®4-6

# ä»»åŠ¡ç±»å‹åˆ†å¸ƒ
TEXT_TASK_RATIO = 0.6     # 60%æ–‡æœ¬ç¿»è¯‘
FILE_TASK_RATIO = 0.4     # 40%æ–‡ä»¶ç¿»è¯‘
```

### 2. ç›‘æ§é…ç½®ä¼˜åŒ–
```python
# è°ƒæ•´æ—¥å¿—çº§åˆ«
logging.getLogger().setLevel(logging.INFO)

# å¯ç”¨æ€§èƒ½ç›‘æ§
ENABLE_PERFORMANCE_MONITORING = True
```

### 3. å®šæœŸç»´æŠ¤
- æ¯å‘¨æ¸…ç†æ—¥å¿—æ–‡ä»¶
- æ¯æœˆåˆ†ææ€§èƒ½è¶‹åŠ¿
- æ¯å­£åº¦ä¼˜åŒ–é…ç½®å‚æ•°

## ğŸ¯ ç›‘æ§æœ€ä½³å®è·µ

1. **å®æ—¶ç›‘æ§**ï¼šä½¿ç”¨ `tail -f` å®æ—¶è§‚å¯Ÿç³»ç»ŸçŠ¶æ€
2. **å®šæœŸæ£€æŸ¥**ï¼šæ¯å°æ—¶æ£€æŸ¥GPUçŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡
3. **è¶‹åŠ¿åˆ†æ**ï¼šè®°å½•æ€§èƒ½æ•°æ®ï¼Œåˆ†æé•¿æœŸè¶‹åŠ¿
4. **å‘Šè­¦è®¾ç½®**ï¼šè®¾ç½®å…³é”®æŒ‡æ ‡çš„å‘Šè­¦é˜ˆå€¼
5. **æ€§èƒ½æŠ¥å‘Š**ï¼šå®šæœŸç”Ÿæˆæ€§èƒ½åˆ†ææŠ¥å‘Š

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. ä½¿ç”¨GPUçŠ¶æ€æ¥å£æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
3. å‚è€ƒæ•…éšœæ’æŸ¥æŒ‡å—
4. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ

---

*æœ€åæ›´æ–°ï¼š2025-08-22*
*ç‰ˆæœ¬ï¼šv1.0*
