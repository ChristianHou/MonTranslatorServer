# GPUè¿è¡Œå‘½ä»¤å¿«é€Ÿå‚è€ƒ

## ğŸš€ å¿«é€Ÿå¯åŠ¨å‘½ä»¤

### Windows PowerShell (æ¨è)
.\run_docker_desktop.ps1

### æ‰‹åŠ¨Dockerå‘½ä»¤
# åŸºç¡€GPUè¿è¡Œ
docker run --gpus all -p 8000:8000 -v "$(pwd)/cache:/app/cache" -v "$(pwd)/files:/app/files" -v "$(pwd)/config:/app/config" --name mon-translator-container mon-translator:gpu

## ğŸ¯ å¸¸ç”¨GPUé…ç½®

### å•GPU
docker run --gpus device=0 -p 8000:8000 -v "$(pwd)/cache:/app/cache" -v "$(pwd)/files:/app/files" -v "$(pwd)/config:/app/config" mon-translator:gpu

### å¤šGPU (4å¡æœåŠ¡å™¨)
docker run --gpus device=0,1,2,3 -p 8000:8000 -v "$(pwd)/cache:/app/cache" -v "$(pwd)/files:/app/files" -v "$(pwd)/config:/app/config" mon-translator:gpu

### GPUå†…å­˜é™åˆ¶
docker run --gpus device=0 --memory=8g -p 8000:8000 -v "$(pwd)/cache:/app/cache" -v "$(pwd)/files:/app/files" -v "$(pwd)/config:/app/config" mon-translator:gpu

### åå°è¿è¡Œ
docker run -d --gpus all -p 8000:8000 --restart=unless-stopped --name mon-translator-prod -v "$(pwd)/cache:/app/cache" -v "$(pwd)/files:/app/files" -v "$(pwd)/config:/app/config" -v "$(pwd)/logs:/app/logs" mon-translator:gpu

## ğŸ” çŠ¶æ€æ£€æŸ¥

### GPUçŠ¶æ€
docker exec -it mon-translator-container nvidia-smi

### PyTorch GPUçŠ¶æ€
docker exec -it mon-translator-container python -c "import torch; print('CUDA:', torch.cuda.is_available()); print('GPUæ•°:', torch.cuda.device_count())"

### å®¹å™¨æ—¥å¿—
docker logs -f mon-translator-container

## ğŸ› ï¸ ç®¡ç†å‘½ä»¤

### åœæ­¢å®¹å™¨
docker stop mon-translator-container

### é‡å¯å®¹å™¨
docker restart mon-translator-container

### åˆ é™¤å®¹å™¨
docker rm mon-translator-container

### æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats mon-translator-container

## ğŸŒ è®¿é—®åœ°å€
- ä¸»ç•Œé¢: http://localhost:8000
- ä»»åŠ¡ç®¡ç†: http://localhost:8000/tasks
- APIæ–‡æ¡£: http://localhost:8000/docs

## âš¡ æ€§èƒ½å¯¹æ¯”
- CPUæ¨¡å¼: æ…¢ (2-4GBå†…å­˜)
- å•GPU: ä¸­ç­‰ (4-8GBå†…å­˜)
- å¤šGPU: å¿« (8-16GBå†…å­˜)
- 4å¡è´Ÿè½½å‡è¡¡: æœ€å¿« (12-24GBå†…å­˜)

## ğŸ†˜ æ•…éšœæ’é™¤

### GPUä¸å¯ç”¨
docker run --rm --gpus all nvidia/cuda:11.8-base-ubuntu20.04 nvidia-smi

### ç«¯å£å†²çª
docker run --gpus all -p 8001:8000 -v "$(pwd)/cache:/app/cache" -v "$(pwd)/files:/app/files" -v "$(pwd)/config:/app/config" mon-translator:gpu

### å†…å­˜ä¸è¶³
docker run --gpus all --memory=16g -p 8000:8000 -v "$(pwd)/cache:/app/cache" -v "$(pwd)/files:/app/files" -v "$(pwd)/config:/app/config" mon-translator:gpu
